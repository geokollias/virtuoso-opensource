# SPB 1G benchmark
# make SSD volumes /1s1 and /1s2
sudo ./mkvol.sh 
# download the spb 1g db backup from the s3 bucket
cd /1s1/
aws s3 cp s3://opl-spb1gdataset/spb1gdb.tar .
# decompress the spb 1g db backup
cd /
tar xf /1s1/spb1gdb.tar 
gunzip /1s1/dbs/spb1g.db.gz &
gunzip /1s2/dbs/spb1g.db.gz &
wait
# cleanup archive
rm /1s1/spb1gdb.tar 
# copy the benchmark on SSD 
cd /home/spb1g/
cp -R /home/ec2-user/ldbc_spb_bm_2.0/dist /1s2/spb1g
# copy the config files for banchmark
cp *.properties /1s2/spb1g
# download the datasets and query parameters
cd /1s2/spb1g/
aws s3 cp s3://opl-spb1gdataset/spb1gdata.tar .
aws s3 cp s3://opl-spb1gdataset/spb1gq.tgz .
# decompress the dataset and query parameters
tar xf spb1gdata.tar
tar zxf spb1gq.tgz
# start the Virtuoso server
cd /home/spb1g
./virtuoso-t +wait
# run the SPB driver
sh run.sh 
# check results from /1s2/spb1g/logs 
# stop the server
isql 1111 dba dba exec="raw_exit()"
